{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matteus\\\\Desktop\\\\School codes\\\\React\\\\Huiswerk\\\\pokelist\\\\src\\\\pages\\\\list-download.js\",\n  _s = $RefreshSig$();\nimport getCookie from \"../scripts/cookies\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/authProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function ListDownload() {\n  _s();\n  const [file, setFile] = useState();\n  const fileReader = new FileReader();\n  const {\n    setFileData\n  } = useState([]);\n  const navigate = useNavigate();\n  const {\n    isAuth\n  } = useContext(AuthContext);\n  function setFav(cvalue) {\n    const d = new Date();\n    d.setTime(d.getTime() + 24 * 60 * 60 * 1000);\n    let expires = \"expires=\" + d.toUTCString();\n    document.cookie = \"FavPokemon=\" + cvalue + \";\" + expires + \";path=/\";\n  }\n  const handleOnChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const handleOnSubmit = e => {\n    e.preventDefault();\n    if (file) {\n      fileReader.onload = function (event) {\n        const csvOutput = event.target.result;\n        // eslint-disable-next-line no-unused-expressions\n        {\n          setFileData;\n        }\n        csvOutput;\n        setFav(csvOutput);\n      };\n      fileReader.readAsText(file);\n    }\n  };\n  function downloadFile() {\n    let tempArr = [];\n    const favPokemons = getCookie(\"FavPokemon\");\n    const split = favPokemons.split(\",\");\n    for (let i = 0; i < split.length; i++) {\n      split[i] = split[i].replace(/\\[/g, \"\");\n      split[i] = split[i].replace(/\\]/g, \"\");\n      // eslint-disable-next-line\n      split[i] = split[i].replace(/\\\"/g, \"\");\n      split[i] = parseInt(split[i]);\n      tempArr.push(parseInt(split[i]));\n    }\n    let csv = \"\";\n    csv += tempArr.join(',');\n    let hiddenElement = document.createElement('a');\n    hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);\n    hiddenElement.target = '_blank';\n    hiddenElement.download = 'Fav Pokemon.csv';\n    hiddenElement.click();\n  }\n  useEffect(() => {\n    if (!isAuth) {\n      navigate(\"/\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"downloadCard\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"download-tekst\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Klaar met je lijst?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Download hem Hier!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 50\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => downloadFile(),\n          className: \"download-button\",\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"uploadCard\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"upload-tekst\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Of upload hier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 45\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"een nieuwe lijst!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 73\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"uploadCard-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"upload-button\",\n            type: \"file\",\n            id: \"csvFileInput\",\n            accept: \".csv\",\n            onChange: handleOnChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"submit-button\",\n            onClick: e => {\n              handleOnSubmit(e);\n            },\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(ListDownload, \"YBX6+Y5pknGABh2bkv2Bimzd2iU=\", false, function () {\n  return [useNavigate];\n});\n_c = ListDownload;\nvar _c;\n$RefreshReg$(_c, \"ListDownload\");","map":{"version":3,"names":["getCookie","useState","useEffect","useContext","useNavigate","AuthContext","ListDownload","file","setFile","fileReader","FileReader","setFileData","navigate","isAuth","setFav","cvalue","d","Date","setTime","getTime","expires","toUTCString","document","cookie","handleOnChange","e","target","files","handleOnSubmit","preventDefault","onload","event","csvOutput","result","readAsText","downloadFile","tempArr","favPokemons","split","i","length","replace","parseInt","push","csv","join","hiddenElement","createElement","href","encodeURI","download","click"],"sources":["C:/Users/Matteus/Desktop/School codes/React/Huiswerk/pokelist/src/pages/list-download.js"],"sourcesContent":["import getCookie from \"../scripts/cookies\";\r\nimport {useState, useEffect, useContext} from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {AuthContext} from \"../context/authProvider\";\r\n\r\nexport function ListDownload() {\r\n\r\n    const [file, setFile] = useState()\r\n    const fileReader = new FileReader()\r\n    const {setFileData} = useState([])\r\n    const navigate = useNavigate()\r\n    const {isAuth} = useContext(AuthContext)\r\n\r\n    function setFav(cvalue) {\r\n        const d = new Date();\r\n        d.setTime(d.getTime() + (24 * 60 * 60 * 1000));\r\n        let expires = \"expires=\" + d.toUTCString();\r\n        document.cookie = \"FavPokemon=\" + cvalue + \";\" + expires + \";path=/\";\r\n    }\r\n\r\n    const handleOnChange = (e) => {\r\n        setFile(e.target.files[0]);\r\n    };\r\n\r\n    const handleOnSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (file) {\r\n            fileReader.onload = function (event) {\r\n                const csvOutput = event.target.result;\r\n                // eslint-disable-next-line no-unused-expressions\r\n                {setFileData}(csvOutput)\r\n                setFav(csvOutput);\r\n            };\r\n            fileReader.readAsText(file);\r\n        }\r\n    };\r\n\r\n    function downloadFile() {\r\n        let tempArr = [];\r\n        const favPokemons = getCookie(\"FavPokemon\");\r\n        const split = favPokemons.split(\",\");\r\n        for (let i = 0; i < split.length; i++) {\r\n            split[i] = split[i].replace(/\\[/g, \"\")\r\n        split[i] = split[i].replace(/\\]/g, \"\")\r\n            // eslint-disable-next-line\r\n            split[i] = split[i].replace(/\\\"/g, \"\")\r\n            split[i] = parseInt(split[i]);\r\n            tempArr.push(parseInt(split[i]))\r\n        }\r\n        let csv = \"\"\r\n        csv += tempArr.join(',');\r\n\r\n        let hiddenElement = document.createElement('a');\r\n        hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);\r\n        hiddenElement.target = '_blank'\r\n\r\n        hiddenElement.download = 'Fav Pokemon.csv';\r\n        hiddenElement.click();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!isAuth) {\r\n            navigate(\"/\")\r\n        }\r\n    }, [])\r\n\r\n    return(\r\n        <>\r\n            <div className='options'>\r\n        <div className='downloadCard'>\r\n            <p className='download-tekst'>\r\n                <span>Klaar met je lijst?</span> <span>Download hem Hier!</span></p>\r\n            <button onClick={() => downloadFile()} className='download-button'>Download</button>\r\n        </div>\r\n            <div className=\"uploadCard\">\r\n                <p className='upload-tekst'><span>Of upload hier</span> <span>een nieuwe lijst!</span></p>\r\n                <form className='uploadCard-buttons'>\r\n                    <input className='upload-button'\r\n                        type={\"file\"}\r\n                        id={\"csvFileInput\"}\r\n                        accept={\".csv\"}\r\n                        onChange={handleOnChange}\r\n                    />\r\n                    <button className='submit-button'\r\n                        onClick={(e) => { handleOnSubmit(e); }}>Submit\r\n                    </button>\r\n                </form>\r\n\r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
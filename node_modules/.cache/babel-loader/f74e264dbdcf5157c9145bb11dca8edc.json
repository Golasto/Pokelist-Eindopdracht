{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matteus\\\\Desktop\\\\School codes\\\\React\\\\Huiswerk\\\\pokelist\\\\src\\\\context\\\\authProvider.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({});\nfunction AuthContextProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [isAuth, toggleIsAuth] = useState({\n    isAuth: false,\n    user: {\n      username: null,\n      email: null\n    }\n  });\n  const [isLoaded, setIsLoaded] = useState(false);\n  const key = localStorage.getItem('key');\n  function login() {\n    console.log('Gebruiker is ingelogd!');\n    toggleIsAuth({\n      isAuth: true\n    });\n  }\n  function logout() {\n    console.log('Gebruiker is uitgelogd!');\n    localStorage.setItem(\"key\", \"\");\n    toggleIsAuth({\n      isAuth: false,\n      user: {\n        username: null,\n        password: null\n      }\n    });\n  }\n  async function getData() {\n    const token = localStorage.getItem(\"key\");\n    try {\n      const response = await axios.get(\"https://frontend-educational-backend.herokuapp.com/api/user\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      });\n      toggleIsAuth({\n        username: response.data.username,\n        email: response.data.email,\n        isAuth: true\n      });\n      console.log(response.data);\n      setIsLoaded(true);\n    } catch (e) {\n      console.error(e.response);\n      setIsLoaded(true);\n    }\n  }\n  const contextData = {\n    isAuth: isAuth,\n    login: login,\n    logout: logout\n    //getData: getData,\n  };\n\n  /*useEffect(() => {\r\n      if (key !== \"\" && key !== null)  {\r\n          getData();\r\n      } else {\r\n          setIsLoaded(true)\r\n      }\r\n  }, []) */\n\n  //if (!isLoaded) {\n  // return <div>Loading...</div>\n  //} if (isLoaded) {\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 13\n  }, this);\n  //}\n}\n_s(AuthContextProvider, \"t1ryucuqvrRnpwVI6EVrObm1/1M=\");\n_c = AuthContextProvider;\nexport default AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jwt_decode","AuthContext","AuthContextProvider","children","isAuth","toggleIsAuth","user","username","email","isLoaded","setIsLoaded","key","localStorage","getItem","login","console","log","logout","setItem","password","getData","token","response","get","headers","data","e","error","contextData"],"sources":["C:/Users/Matteus/Desktop/School codes/React/Huiswerk/pokelist/src/context/authProvider.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport  axios  from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport const AuthContext = createContext({});\r\n\r\nfunction AuthContextProvider({ children }) {\r\n    const [isAuth, toggleIsAuth] = useState({\r\n        isAuth: false,\r\n        user: {\r\n            username: null,\r\n            email: null,\r\n        }\r\n    });\r\n\r\n    const [isLoaded, setIsLoaded] = useState(false)\r\n    const key = localStorage.getItem('key')\r\n\r\n    function login() {\r\n        console.log('Gebruiker is ingelogd!');\r\n        toggleIsAuth({isAuth: true});\r\n    }\r\n\r\n    function logout() {\r\n        console.log('Gebruiker is uitgelogd!');\r\n        localStorage.setItem(\"key\",\"\")\r\n        toggleIsAuth({isAuth: false, user: {username: null, password: null}});\r\n    }\r\n\r\n    async function getData() {\r\n        const token = localStorage.getItem(\"key\")\r\n\r\n        \r\n\r\n        try {\r\n            const response = await axios.get(\"https://frontend-educational-backend.herokuapp.com/api/user\",\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Authorization\": `Bearer ${token}`,\r\n                    }\r\n                })\r\n            toggleIsAuth({ username: response.data.username, email: response.data.email, isAuth: true })\r\n            console.log(response.data)\r\n            setIsLoaded(true)\r\n        } catch (e) {\r\n            console.error(e.response)\r\n            setIsLoaded(true)\r\n        }\r\n    }\r\n\r\n    const contextData = {\r\n        isAuth: isAuth,\r\n        login: login,\r\n        logout: logout,\r\n        //getData: getData,\r\n    };\r\n\r\n    /*useEffect(() => {\r\n        if (key !== \"\" && key !== null)  {\r\n            getData();\r\n        } else {\r\n            setIsLoaded(true)\r\n        }\r\n    }, []) */\r\n\r\n    //if (!isLoaded) {\r\n       // return <div>Loading...</div>\r\n    //} if (isLoaded) {\r\n        return (\r\n            <AuthContext.Provider value={contextData}>\r\n                {children}\r\n            </AuthContext.Provider>\r\n        );\r\n    //}\r\n}\r\n\r\nexport default AuthContextProvider;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,OAAQC,KAAK,MAAO,OAAO;AAC3B,OAAOC,UAAU,MAAM,YAAY;AAAC;AAEpC,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC,CAAC,CAAC;AAE5C,SAASM,mBAAmB,OAAe;EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC;EACrC,MAAM,CAACC,MAAM,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC;IACpCO,MAAM,EAAE,KAAK;IACbE,IAAI,EAAE;MACFC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE;IACX;EACJ,CAAC,CAAC;EAEF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMc,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;EAEvC,SAASC,KAAK,GAAG;IACbC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACrCX,YAAY,CAAC;MAACD,MAAM,EAAE;IAAI,CAAC,CAAC;EAChC;EAEA,SAASa,MAAM,GAAG;IACdF,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtCJ,YAAY,CAACM,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC;IAC9Bb,YAAY,CAAC;MAACD,MAAM,EAAE,KAAK;MAAEE,IAAI,EAAE;QAACC,QAAQ,EAAE,IAAI;QAAEY,QAAQ,EAAE;MAAI;IAAC,CAAC,CAAC;EACzE;EAEA,eAAeC,OAAO,GAAG;IACrB,MAAMC,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IAIzC,IAAI;MACA,MAAMS,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAAC,6DAA6D,EAC1F;QACIC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,UAASH,KAAM;QACrC;MACJ,CAAC,CAAC;MACNhB,YAAY,CAAC;QAAEE,QAAQ,EAAEe,QAAQ,CAACG,IAAI,CAAClB,QAAQ;QAAEC,KAAK,EAAEc,QAAQ,CAACG,IAAI,CAACjB,KAAK;QAAEJ,MAAM,EAAE;MAAK,CAAC,CAAC;MAC5FW,OAAO,CAACC,GAAG,CAACM,QAAQ,CAACG,IAAI,CAAC;MAC1Bf,WAAW,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOgB,CAAC,EAAE;MACRX,OAAO,CAACY,KAAK,CAACD,CAAC,CAACJ,QAAQ,CAAC;MACzBZ,WAAW,CAAC,IAAI,CAAC;IACrB;EACJ;EAEA,MAAMkB,WAAW,GAAG;IAChBxB,MAAM,EAAEA,MAAM;IACdU,KAAK,EAAEA,KAAK;IACZG,MAAM,EAAEA;IACR;EACJ,CAAC;;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;;EAEI;EACG;EACH;EACI,oBACI,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAEW,WAAY;IAAA,UACpCzB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACU;EAE/B;AACJ;AAAC,GArEQD,mBAAmB;AAAA,KAAnBA,mBAAmB;AAuE5B,eAAeA,mBAAmB;AAAC;AAAA"},"metadata":{},"sourceType":"module"}